<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Atelier ‚Äî Seconde Guerre mondiale (1939‚Äë1945)</title>
<style>
:root{
  --bg:#0f1115; --bg2:#151a22; --paper:#f4efe6; --ink:#1d1b1b; --line:#cab896;
  --gold:#c7a76b; --blue:#2a6fb6; --red:#c44b41; --green:#2e7d32;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0; color:var(--ink);
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  background: radial-gradient(1200px 600px at 50% -10%, #1f2230 0%, transparent 60%), linear-gradient(180deg, var(--bg), var(--bg2));
  overflow-x:hidden;
}
header{padding:28px 14px; text-align:center}
h1{
  margin:0; font-weight:800; letter-spacing:.06em; text-transform:uppercase;
  color:#f5e9ce; text-shadow: 0 1px 0 #00000088, 0 0 32px #00000066;
}
.sub{color:#e8d9b8cc; margin-top:10px; letter-spacing:.02em}
.container{max-width:1200px; margin:0 auto; padding:18px}
.paper{
  background:var(--paper); border:1px solid var(--line); border-radius:18px; padding:18px;
  box-shadow:0 18px 70px rgba(0,0,0,.5), inset 0 0 0 1px #00000010; position:relative;
}
.paper:before,.paper:after{content:""; position:absolute; width:64px; height:64px; border:2px solid var(--gold);
  top:-10px; border-bottom:none; border-left:none; border-radius:0 12px 0 0; opacity:.5}
.paper:before{left:-10px; transform:scaleX(-1)} .paper:after{right:-10px}
.hr{border-top:1px dashed var(--line); margin:18px 0}
.badge{display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:#fff7dc; font-weight:700; font-size:12px}
.kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; padding:.1em .4em; border:1px solid #00000020; border-radius:6px; background:#fff}

/* Timeline */
#timeline{position:relative; background:#fff8ea; border:1px solid var(--line); border-radius:14px; padding:16px; overflow:hidden}
.axis{position:relative; height:180px}
.axis .line{position:absolute; top:86px; left:26px; right:26px; height:6px; background:linear-gradient(90deg,#d8c59a,#b79450); border-radius:4px; box-shadow:inset 0 0 8px #00000022}
.tick{position:absolute; top:62px; width:1px; height:48px; background:#c9b78f}
.tick label{position:absolute; top:46px; transform:translateX(-50%); font-size:12px; color:#6b4f1d}
.point{position:absolute; top:70px; width:18px; height:18px; border-radius:50%; border:1px solid #2a2018aa; cursor:pointer; box-shadow:0 2px 6px #00000033; outline:2px solid #0000; transition:transform .15s ease, outline-color .15s ease}
.point[data-t="mil"]{background:#2a6fb6} .point[data-t="pol"]{background:#c44b41} .point[data-t="sci"]{background:#2e7d32}
.point:hover{transform:scale(1.12); outline-color:#00000020}

/* Modal */
.modal{position:fixed; inset:0; background:rgba(12,10,10,.6); display:none; align-items:center; justify-content:center; padding:20px; z-index:1000}
.modal .card{background:var(--paper); border:1px solid var(--line); border-radius:18px; max-width:900px; width:100%; padding:18px; box-shadow:0 24px 90px rgba(0,0,0,.55)}
.modal h3{margin:0 0 6px 0; font-family:Georgia,serif; color:#3d3028; letter-spacing:.02em}
.modal .meta{display:flex; gap:8px; align-items:center; margin-bottom:10px}
.close{float:right; background:#c44b41; color:#fff; border:none; border-radius:12px; padding:8px 12px; cursor:pointer}

/* Iframe embed */
.embed{background:#fffdf5; border:1px solid var(--line); border-radius:14px; overflow:hidden}
.embed .top{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px; border-bottom:1px dashed var(--line); background:#fff8ea}
.embed .top .title{font-weight:800; color:#5a492f}
.embed iframe{display:block; width:100%; height:820px; border:0}
.embed .bar{display:flex; gap:8px; align-items:center; justify-content:flex-end; padding:8px 10px; border-top:1px dashed var(--line); background:#fffaf0}
.btn{appearance:none; border:none; color:#1e1a16; cursor:pointer; font-weight:700; letter-spacing:.02em;
  background:linear-gradient(180deg,#f6e6c2,#e5cf9b); border:1px solid #00000030; border-radius:12px; padding:8px 12px;
  box-shadow:0 6px 16px rgba(0,0,0,.35), inset 0 0 10px rgba(255,255,255,.08);
}
.btn:hover{filter:brightness(1.05)}

/* Quiz */
.quiz-item{border:1px solid var(--line); border-radius:12px; padding:12px; margin:8px 0; background:#fff9f0}
.quiz-item label{display:block; margin:6px 0}
.correct{color:#2e7d32; font-weight:700}
.wrong{color:#c62828; font-weight:700}

@media (max-width:900px){
  .axis .line{left:18px; right:18px}
  .embed iframe{height:76vh}
}
</style>
</head>
<body>
<header>
  <h1>Atelier ‚Äî Seconde Guerre mondiale (1939‚Äë1945)</h1>
  <div class="sub">Phases du conflit, fronts, R√©sistance, cryptage ‚Äî avec atelier de chiffrement int√©gr√©</div>
</header>

<div class="container">
  <section class="paper">
    <h2>1) Objectifs & rep√®res</h2>
    <p>√Ä l‚Äôissue de l‚Äôatelier, tu dois savoir : <b>dater</b> les grandes phases (1939, 1941, 1942‚Äë43, 1944‚Äë45), <b>caract√©riser</b> les fronts (Europe, Pacifique), <b>expliquer</b> la logique industrielle et id√©ologique du conflit et <b>illustrer</b> les pratiques de chiffrement et de d√©chiffrement.</p>
    <div class="badge">Cat√©gories : <b style="color:var(--blue)">militaire</b> ‚Ä¢ <b style="color:var(--red)">politique / id√©ologique</b> ‚Ä¢ <b style="color:var(--green)">science & technique</b></div>
  </section>

  <section class="paper">
    <h2>2) Frise 1939 ‚Üí 1945 (clique un point)</h2>
    <div id="timeline"><div class="axis" id="axis"><div class="line"></div></div></div>
    <div class="hr"></div>
    <div class="small">Navigation clavier : <span class="kbd">‚Üê</span> <span class="kbd">‚Üí</span> quand la fen√™tre est ouverte.</div>
  </section>

  <section class="paper">
    <h2>3) Atelier de chiffrement ‚Äî ‚ÄúHENRI DECODE‚Äù</h2>
    <div class="embed">
      <div class="top">
        <div class="title">C√©sar, Vigen√®re, Transposition, Enigma (M3), Playfair, Hill 2√ó2, One‚ÄëTime Pad</div>
        <button class="btn" onclick="document.getElementById('hdFrame').requestFullscreen?.()">üìñ Plein √©cran</button>
      </div>
      <iframe id="hdFrame" src="HENRIDECODE.html" title="HENRI DECODE ‚Äî atelier de chiffrement"></iframe>
      <div class="bar">
        <a class="btn" href="HENRIDECODE.html" target="_blank">üîó Ouvrir dans un onglet</a>
      </div>
    </div>
  </section>

  <section class="paper">
    <h2>4) QCM ‚Äî 10 questions</h2>
    <div id="qcm"></div>
    <button id="corriger" class="btn">Corriger</button>
    <span id="scoreQCM" class="badge" style="display:none;margin-left:8px"></span>
  </section>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="card">
    <button class="close" id="closeM">Fermer</button>
    <h3 id="mTitle">Titre</h3>
    <div class="meta"><span class="badge" id="mYear">1941</span> <span class="badge" id="mType">Militaire</span></div>
    <div id="mText"></div>
  </div>
</div>

<script>
const $ = s => document.querySelector(s);


const TL = [
  {year:1939, t:'mil', title:'Invasion de la Pologne', text:'1er septembre : l‚ÄôAllemagne envahit la Pologne ; 3 septembre : Royaume‚ÄëUni et France d√©clarent la guerre.'},
  {year:1940, t:'mil', title:'Blitzkrieg √† l‚ÄôOuest', text:'Mai‚Äëjuin : perc√©e allemande par les Ardennes, armistice fran√ßais (22 juin). Bataille d‚ÄôAngleterre.'},
  {year:1941, t:'mil', title:'Barbarossa & Pearl Harbor', text:'22 juin : invasion de l‚ÄôURSS. 7 d√©cembre : attaque japonaise contre Pearl Harbor ‚Üí entr√©e en guerre des √âtats‚ÄëUnis.'},
  {year:1942, t:'mil', title:'Tournants', text:'Midway (Pacifique) ; Stalingrad (1942‚Äë43) et El Alamein (Afrique) inversent la dynamique.'},
  {year:1944, t:'mil', title:'D√©barquement & Lib√©rations', text:'6 juin : D√©barquement alli√© en Normandie ; lib√©ration de Paris (ao√ªt). Fronts se resserrent sur l‚ÄôAllemagne.'},
  {year:1945, t:'mil', title:'Capitulations', text:'8 mai : capitulation allemande en Europe ; 6 & 9 ao√ªt : bombardements atomiques d‚ÄôHiroshima et Nagasaki ; 2 septembre : capitulation japonaise.'},
  {year:1942, t:'pol', title:'G√©nocide des Juifs d‚ÄôEurope', text:'Conf√©rence de Wannsee (janvier 1942) ; mise en ≈ìuvre de la ‚ÄúSolution finale‚Äù.'},
  {year:1943, t:'sci', title:'Cryptanalyse & renseignement', text:'Bletchley Park (ULTRA) : cassage d‚ÄôEnigma/ Lorenz ; importance des communications s√©curis√©es.'}
];
let currentIndex = 0;
function renderAxis(){
  const axis = document.getElementById('axis'); axis.innerHTML = '<div class="line"></div>';
  const min=1939, max=1945, span=max-min, w = axis.clientWidth-52;
  for(let y=min; y<=max; y++){
    const x = 26 + Math.round(((y-min)/span)*w);
    const t = document.createElement('div'); t.className='tick'; t.style.left = x+'px';
    const label = document.createElement('label'); label.textContent = y; t.appendChild(label);
    axis.appendChild(t);
  }
  TL.forEach((ev,idx)=>{
    const x = 26 + Math.round(((ev.year-min)/span)*w);
    const p = document.createElement('div'); p.className='point'; p.dataset.t=ev.t; p.style.left = (x-9)+'px';
    p.title = ev.year+' ‚Äî '+ev.title;
    p.addEventListener('click', ()=> { currentIndex=idx; openModal(ev);});
    axis.appendChild(p);
  });
}
function openModal(ev){
  const typeMap = {mil:'Militaire', pol:'Politique/id√©ologique', sci:'Science & technique'};
  $('#mTitle').textContent = ev.title;
  $('#mYear').textContent = ev.year;
  $('#mType').textContent = typeMap[ev.t]||'';
  $('#mText').innerHTML = '<p>'+ev.text+'</p>';
  $('#modal').style.display='flex';
}
$('#closeM').addEventListener('click', ()=> $('#modal').style.display='none');
$('#modal').addEventListener('click', (e)=>{ if(e.target.id==='modal') e.currentTarget.style.display='none'; });
window.addEventListener('resize', renderAxis);
document.addEventListener('keydown', (e)=>{
  if(document.getElementById('modal').style.display!=='flex') return;
  if(e.key==='ArrowRight'){ currentIndex = Math.min(currentIndex+1, TL.length-1); openModal(TL[currentIndex]); }
  if(e.key==='ArrowLeft'){ currentIndex = Math.max(currentIndex-1, 0); openModal(TL[currentIndex]); }
});
renderAxis();

/* ===== QCM ===== */
const QUESTIONS = [
  {q:'La guerre en Europe d√©bute par :', a:['l‚Äôinvasion de la Pologne','le d√©barquement en Normandie','la bataille d‚ÄôAngleterre'], c:0},
  {q:'La ‚ÄúBlitzkrieg‚Äù d√©crit surtout :', a:['une guerre navale','une guerre √©clair m√©canis√©e','une guerre de tranch√©es'], c:1},
  {q:'Pearl Harbor entra√Æne :', a:['la sortie des USA du conflit','l‚Äôentr√©e en guerre des USA','la fin de la guerre du Pacifique'], c:1},
  {q:'Stalingrad (1942‚Äë43) est un tournant car :', a:['victoire allemande','arr√™t de l‚Äôexpansion allemande','paix s√©par√©e'], c:1},
  {q:'Le 6 juin 1944 correspond :', a:['au d√©barquement en Normandie','√† la capitulation allemande','au bombardement d‚ÄôHiroshima'], c:0},
  {q:'La ‚ÄúSolution finale‚Äù d√©signe :', a:['le plan de reconstruction','le g√©nocide des Juifs d‚ÄôEurope','un accord de paix'], c:1},
  {q:'ULTRA / Bletchley Park concernent :', a:['la cryptanalyse alli√©e','les essais atomiques am√©ricains','la doctrine de blitzkrieg'], c:0},
  {q:'Le 8 mai 1945 est :', a:['la capitulation allemande en Europe','la capitulation japonaise','le d√©but de Barbarossa'], c:0},
  {q:'Dans Enigma, le ‚ÄúSteckerbrett‚Äù est :', a:['le tableau de branchement (plugboard)','le r√©flecteur','un type de rotor'], c:0},
  {q:'Pour d√©chiffrer avec Enigma, il faut :', a:['la m√™me cl√© (rotors, positions, branchements)','inverser la cl√©','changer de r√©flecteur'], c:0},
];
function renderQCM(){
  const root = document.getElementById('qcm'); root.innerHTML='';
  QUESTIONS.forEach((it,idx)=>{
    const box = document.createElement('div'); box.className='quiz-item';
    box.innerHTML = '<div><b>Q'+(idx+1)+'.</b> '+it.q+'</div>'
      + it.a.map((opt,i)=>'<label><input type="radio" name="q'+idx+'" value="'+i+'"> '+opt+'</label>').join('');
    root.appendChild(box);
  });
}
renderQCM();
document.getElementById('corriger').addEventListener('click', ()=>{
  document.querySelectorAll('.quiz-item .correct, .quiz-item .wrong').forEach(e=>e.remove());
  let score=0;
  QUESTIONS.forEach((it,idx)=>{
    const sel = document.querySelector('input[name="q'+idx+'"]:checked');
    const box = document.querySelectorAll('.quiz-item')[idx];
    if(!sel){ box.insertAdjacentHTML('beforeend','<div class="wrong">‚úñ Non r√©pondu</div>'); return; }
    if(+sel.value===it.c){ score++; box.insertAdjacentHTML('beforeend','<div class="correct">‚úî Correct</div>'); }
    else { box.insertAdjacentHTML('beforeend','<div class="wrong">‚úñ Faux (bonne r√©ponse : '+it.a[it.c]+')</div>'); }
  });
  const s=document.getElementById('scoreQCM'); s.style.display='inline-flex'; s.innerHTML='<b>Score :</b> '+score+'/10';
});
</script>
</body>
</html>
